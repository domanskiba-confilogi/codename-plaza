# mountButton — Pure JS + TailwindCSS Button Component

A lightweight, framework-agnostic button component powered by TailwindCSS. Follows the “mount*” pattern from your example. Supports multiple variants (primary, secondary, success, danger, warning, ghost, outline), sizes, icons, loading/disabled states, and link/button modes.

- No dependencies beyond TailwindCSS
- Renders as <button> or <a> depending on `href`
- Accessible, keyboard-friendly
- Small, composable API

---

## Quick Start

1) Ensure TailwindCSS is present on your page (CDN example):
```html
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.10/dist/tailwind.min.css" rel="stylesheet" />
```

2) Add a mount point:
```html
<div id="btn1"></div>
```

3) Initialize:
```html
<script>
  // Paste the mountButton implementation here (from previous message)

  const btn = mountButton('#btn1', {
    label: 'Get Started',
    variant: 'primary',
    size: 'md',
    onClick: () => console.log('Get Started clicked'),
  });
</script>
```

---

## Installation

- Copy the `mountButton` function into your JS bundle or inline script.
- Ensure TailwindCSS is available (CDN or your build pipeline).
- If you customize class maps (variants/sizes/rounded), keep them as explicit strings so Tailwind JIT picks them up. If you must compute classes dynamically, safelist them in your Tailwind config.

---

## Usage Examples

Render primary (blue) button:
```js
mountButton('#btn-primary', {
  label: 'Get Started',
  variant: 'primary',
  size: 'md',
});
```

Render secondary (neutral) button:
```js
mountButton('#btn-secondary', {
  label: 'Learn More',
  variant: 'secondary',
  size: 'md',
});
```

Large success button, full width, with leading icon:
```js
const RIGHT_ARROW_SVG = `
<svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
  <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l5 5a.997.997 0 010 1.414l-5 5a1 1 0 11-1.414-1.414L13.586 10H4a1 1 0 110-2h9.586l-3.293-3.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
</svg>`.trim();

mountButton('#btn-success', {
  label: 'Continue',
  variant: 'success',
  size: 'lg',
  block: true,
  leadingIconSvg: RIGHT_ARROW_SVG,
});
```

Danger (red) button with loading state:
```js
const btn = mountButton('#btn-danger', { label: 'Delete', variant: 'danger' });
btn.setLoading(true);
setTimeout(() => btn.setLoading(false), 2000);
```

Outline link opening in a new tab:
```js
const EXTERNAL_LINK_SVG = `
<svg class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
  <path d="M14 3h7v7h-2V6.414l-9.293 9.293-1.414-1.414L17.586 5H14V3z"></path>
  <path d="M5 5h6v2H7v10h10v-4h2v6H5V5z"></path>
</svg>`.trim();

mountButton('#btn-outline', {
  label: 'Docs',
  variant: 'outline',
  href: 'https://example.com/docs',
  target: '_blank',
  rel: 'noopener noreferrer',
  trailingIconSvg: EXTERNAL_LINK_SVG,
});
```

---

## API Reference

### mountButton(selector, options) => api
Mounts the component into the first element matching `selector`.

- selector: string (CSS selector)
- options: object (see below)
- returns: api object

#### Options
- id: string — DOM id for the element (autogenerated if omitted)
- label: string — visible button text (default: "Button")
- variant: "primary" | "secondary" | "success" | "danger" | "warning" | "ghost" | "outline" (default: "primary")
- size: "sm" | "md" | "lg" (default: "md")
- rounded: "none" | "sm" | "md" | "lg" | "xl" | "full" (default: "md")
- block: boolean — full width (default: false)
- href: string | null — if set, renders as <a> (default: null)
- target: string — link target (e.g., "_blank")
- rel: string — link rel (e.g., "noopener noreferrer")
- type: string — button type if rendered as <button> (default: "button")
- disabled: boolean (default: false)
- loading: boolean (default: false)
- leadingIconSvg: string — SVG markup for leading icon (optional)
- trailingIconSvg: string — SVG markup for trailing icon (optional)
- ariaLabel: string — override aria-label (optional)
- onClick: function(event) — click handler (optional)

#### API Methods
- root: HTMLElement — the mount container
- el: HTMLElement — the button/link element
- focus(): void — focus the element
- click(): void — programmatically click
- setLabel(text: string): void
- setVariant(variant): void
- setSize(size): void
- setRounded(rounded): void
- setBlock(block: boolean): void
- setDisabled(disabled: boolean): void
- setLoading(loading: boolean): void
- setHref(href: string | null, target?: string, rel?: string): void
- setIcons({ leading?: string, trailing?: string }): void
- on(eventName: string, handler: (e) => void): () => void — attach event listener, returns unsubscribe
- destroy(): void — remove listeners and unmount
- getState(): object — snapshot of current state

---

## Variants

All variants include a subtle ring to match the original style.

- primary: bg-blue-500/20 text-blue-400 hover:bg-blue-500/25 ring-neutral-800
- secondary: text-neutral-200 hover:bg-neutral-900 ring-neutral-800
- success: bg-green-500/20 text-green-400 hover:bg-green-500/25 ring-neutral-800
- danger: bg-red-500/20 text-red-400 hover:bg-red-500/25 ring-neutral-800
- warning: bg-amber-500/20 text-amber-400 hover:bg-amber-500/25 ring-neutral-800
- ghost: bg-transparent text-neutral-200 hover:bg-neutral-900/60 ring-neutral-800
- outline: bg-transparent text-neutral-200 hover:bg-neutral-900 ring-neutral-800

Base classes:
- inline-flex items-center gap-2 font-semibold ring-1 ring-inset ring-neutral-800 transition-colors
- focus:outline-none focus:ring-2 select-none
- disabled:opacity-50 disabled:cursor-not-allowed

---

## Sizes
- sm: px-3 py-1.5 text-sm
- md: px-4 py-2 text-sm
- lg: px-5 py-3 text-base

## Rounded
- none | sm | md | lg | xl | full (maps to Tailwind rounded-* classes)

---

## Accessibility

- When rendered as <button>, native disabled behavior is used.
- When rendered as <a> and disabled/loading: aria-disabled="true" + pointer-events-none to prevent interaction.
- Focus-visible ring via Tailwind focus:ring-2.
- aria-label can be overridden with `ariaLabel` if your `label` is not descriptive enough (e.g., icon-only use cases).
- Keyboard: Enter/Space works; native in <button>. For <a> without href (rare), role="button" and keydown handling ensures accessibility.

---

## DOM Structure

- Renders a single <button> or <a> with inline-flex layout:
  [leading-icon?] [label] [trailing-icon?]
- Icon slots are optional and only mounted when content is provided.

---

## Editing Styles and Themes

- Update the `variantClasses`, `sizeClasses`, and `roundedClasses` maps inside the component to change design tokens.
- Keep class strings explicit to ensure Tailwind JIT includes them.
- If you must compute classes dynamically from runtime data, safelist them in tailwind.config.js:
```js
// tailwind.config.js
module.exports = {
  content: ['./**/*.html', './**/*.js'],
  safelist: [
    'bg-blue-500/20', 'text-blue-400', 'hover:bg-blue-500/25',
    'bg-green-500/20', 'text-green-400', 'hover:bg-green-500/25',
    // ...add any classes you introduce dynamically
  ],
};
```

---

## Minimal HTML Demo

```html
<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>mountButton Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.10/dist/tailwind.min.css" rel="stylesheet" />
  </head>
  <body class="bg-neutral-950 text-neutral-200 p-8 space-y-4">
    <div id="btn1"></div>
    <div id="btn2"></div>
    <div id="btn3"></div>
    <script>
      // Paste the entire mountButton implementation here

      const btn1 = mountButton('#btn1', {
        label: 'Get Started',
        variant: 'primary',
        size: 'md',
      });

      const btn2 = mountButton('#btn2', {
        label: 'Learn More',
        variant: 'secondary',
        size: 'md',
      });

      const btn3 = mountButton('#btn3', {
        label: 'Delete',
        variant: 'danger',
        size: 'sm',
      });
      setTimeout(() => btn3.setLoading(true), 800);
      setTimeout(() => btn3.setLoading(false), 2400);
    </script>
  </body>
</html>
```

---

## Notes and Edge Cases

- Anchors cannot be truly disabled; this component simulates disabled with aria-disabled + pointer-events-none and prevents clicks.
- When switching between button and link with `setHref`, the component preserves classes and children and re-wires events.
- `label` is set with textContent (not innerHTML), so it’s safe from HTML injection. SVG icons are strings you control; sanitize if they come from untrusted sources.
- Use `setLoading(true)` to lock interaction and show a spinner in the leading slot.

---

## Migration From Your Snippet

Your snippet:
- Primary-like:
  - inline-flex items-center rounded-md bg-blue-500/20 px-4 py-2 text-sm font-semibold text-blue-400 ring-1 ring-inset ring-neutral-800 hover:bg-blue-500/25
- Secondary-like:
  - inline-flex items-center rounded-md px-4 py-2 text-sm font-semibold text-neutral-200 ring-1 ring-inset ring-neutral-800 hover:bg-neutral-900

In this component:
- variant: "primary" reproduces the blue tinted style
- variant: "secondary" reproduces the neutral style
- You can adjust size, rounded, icons, and behavior via the API without changing markup

---

## Type Hints (Optional)

JSDoc signatures you can paste above the function for editor intellisense:
```js
/**
 * @typedef {Object} MountButtonOptions
 * @property {string} [id]
 * @property {string} [label]
 * @property {'primary'|'secondary'|'success'|'danger'|'warning'|'ghost'|'outline'} [variant]
 * @property {'sm'|'md'|'lg'} [size]
 * @property {'none'|'sm'|'md'|'lg'|'xl'|'full'} [rounded]
 * @property {boolean} [block]
 * @property {string|null} [href]
 * @property {string} [target]
 * @property {string} [rel]
 * @property {'button'|'submit'|'reset'} [type]
 * @property {boolean} [disabled]
 * @property {boolean} [loading]
 * @property {string} [leadingIconSvg]
 * @property {string} [trailingIconSvg]
 * @property {string} [ariaLabel]
 * @property {(e:MouseEvent)=>void} [onClick]
 */
```

---

If you want me to generate a pre-bundled file or add additional variants (e.g., tertiary, monochrome, brand), say the word and I’ll extend the maps for you.
